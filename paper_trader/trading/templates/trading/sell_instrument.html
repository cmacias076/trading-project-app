{% extends "trading/base.html" %}

{% block title %}Sell {{ instrument.symbol }}{% endblock %}

{% block content %}
<div class="container mt-4">

  <a href="{% url 'portfolio' %}" class="btn btn-outline-secondary btn-sm mb-3">‚Üê Back to Portfolio</a>

  <div class="card shadow-sm p-4 mb-4">
    <h2 class="mb-3">Sell {{ instrument.symbol }}</h2>
    <p><strong>Current Price:</strong> ${{ price|floatformat:2 }}</p>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    <form method="post" class="mt-3 d-flex flex-column flex-sm-row gap-2 align-items-start">
      {% csrf_token %}
      <div class="mb-2">
        <label for="quantity" class="form-label">Quantity to Sell:</label>
        <input type="number" name="quantity" min="1" max="{{ holding.quantity|floatformat:2 }}" required class="form-control" style="width: 150px;">
      </div>
      <button type="submit" class="btn btn-warning mt-2 mt-sm-0">Sell</button>
    </form>
  </div>

</div>
{% endblock %}
